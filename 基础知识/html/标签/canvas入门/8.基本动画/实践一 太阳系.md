**动画实现效果**：[https://55w8n.csb.app/](https://55w8n.csb.app/) （来自codesandbox）

**动画截图：**
![[Pasted image 20240820162033.png]]

**完整代码截图：**
![[Pasted image 20240820162107.png]]

**动画效果分析：**

地球绕着太阳转，月亮围着地球转，其中地球朝向太阳的背面为阴影，月亮被地球遮挡时也需要有阴影。其中地球显示轨道

**材料图：**

太阳及星空背景，地球（无背景），月亮（无背景）

**动画逐步实现：**

- 创建初始化函数，只执行一次，引入我们需要的图形，调用**window.requestAnimationFrame()** 告诉浏览器——你希望执行一个动画，并且要求浏览器在下次重绘之前调用指定的回调函数更新动画。
![[Pasted image 20240820162154.png]]

- 创建回调函数，这样浏览器可以重绘下一帧动画，最后初始调用初始化函数，动画就此开始。使用了destination-over，可以让我们将图片从前往后画，每次重绘前，清空上一次的指标。
![[Pasted image 20240820162204.png]]
- 回调函数draw（）内，做好绘制地球前的准备，定义阴影颜色，地球轨道颜色蓝色，保存状态后，将原点移到画布的中心
![[Pasted image 20240820162255.png]]
- 回调函数内，利用时间来确定旋转角度，现在原点在画布中间，我们将原点往右边移动105，画出一块长方形阴影正好覆盖半个地球
![[Pasted image 20240820162309.png]]
![[Pasted image 20240820162316.png]]
- 保存状态后，绘制月球
![[Pasted image 20240820162325.png]]

- restore两次后，恢复到状态一，此时原点依然在画布左上角，然后画出地球轨迹的圆，最后将太阳与背景图放上去
![[Pasted image 20240820162338.png]]